<ion-content class="admin-profesionales-page ion-padding">

  <div class="navbar">
    <div class="nav-logo">
      <img src="./../../assets/Img/logo3.png" alt="Logo Veterinaria" />
      <span>Veterinaria Pucará Profesionales Admin</span>
    </div>

    <div class="nav-links">
      <a routerLink="/admin-dashboard">Adm Cita</a>
      <a href="/admin-servicios">Adm Servicios</a>
      <a routerLink="/admin-blog">Adm Blog</a>
      <ion-button color="danger" (click)="logout()">Cerrar sesión</ion-button>
    </div>
  </div>


  <div class="navbar-space"></div>

  <h1>Gestión de Profesionales</h1>

  <div class="acciones-top">
    <ion-button color="primary" (click)="toggleFormulario()">
      {{ mostrarFormulario ? 'Cerrar formulario' : 'Nuevo Profesional' }}
    </ion-button>
  </div>

  <!-- FORMULARIO -->
  <div class="formulario-card" *ngIf="mostrarFormulario">
    <h2>{{ modoEditar ? 'Editar Profesional' : 'Nuevo Profesional' }}</h2>

    <form>
      <ion-input label="Nombre" [(ngModel)]="formulario.nombre" name="nombre"></ion-input>
      <ion-input label="Apellido" [(ngModel)]="formulario.apellido" name="apellido"></ion-input>
      <ion-input label="Teléfono" [(ngModel)]="formulario.telefono" name="telefono"></ion-input>
      <ion-input label="Email" [(ngModel)]="formulario.email" name="email"></ion-input>

      <ion-select label="Servicio" [(ngModel)]="formulario.id_servicio" name="servicio">
        <ion-select-option *ngFor="let s of servicios" [value]="s.ID_SERVICIO">
          {{ s.NOMBRE_SERVICIO }}
        </ion-select-option>
      </ion-select>

      <ion-select label="Activo" [(ngModel)]="formulario.activo" name="activo">
        <ion-select-option value="S">Sí</ion-select-option>
        <ion-select-option value="N">No</ion-select-option>
      </ion-select>

      <ion-button expand="block" color="success" *ngIf="!modoEditar" (click)="crear()">
        Crear Profesional
      </ion-button>

      <ion-button expand="block" color="warning" *ngIf="modoEditar" (click)="guardarEdicion()">
        Guardar Cambios
      </ion-button>

      <ion-button expand="block" fill="outline" color="medium" (click)="resetFormulario()">
        Limpiar
      </ion-button>
    </form>
  </div>

  <h2>Listado de Profesionales</h2>

  <div class="lista">
    <div class="item" *ngFor="let p of profesionales">
      <div class="info">
        <strong>{{ p.NOMBRE }} {{ p.APELLIDO }}</strong>
        <p>Servicio: {{ p.NOMBRE_SERVICIO }}</p>
        <p>Tel: {{ p.TELEFONO }}</p>
        <p>Email: {{ p.EMAIL }}</p>
        <p>Activo: <strong>{{ p.ACTIVO }}</strong></p>
      </div>

      <div class="acciones">
        <ion-button size="small" color="warning" (click)="cargarEdicion(p)">Editar</ion-button>
        <ion-button size="small" color="danger" (click)="eliminar(p)">Eliminar</ion-button>
      </div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="footer-content">
      <div>
        <h4>Información</h4>
        <ul>
          <li><a href="#">Nuestra Clínica</a></li>
          <li><a href="#">Preguntas Frecuentes</a></li>
          <li><a routerLink="/admin-login">Ingreso Admin</a></li>
        </ul>
      </div>

      <div>
        <h4>Políticas</h4>
        <ul>
          <li><a href="#">Privacidad</a></li>
          <li><a href="#">Términos y Condiciones</a></li>
        </ul>
      </div>

      <div>
        <h4>Contáctanos</h4>
        <p>contacto@veterinaria.cl</p>
        <p>+56 2 2859 2840</p>
      </div>
    </div>

    <div class="footer-bottom">
      © 2025 Clínica Veterinaria Pucará. Todos los derechos reservados.
    </div>
  </footer>

</ion-content>
